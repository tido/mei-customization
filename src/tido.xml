<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_odds.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_odds.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns:sch="http://purl.oclc.org/dsdl/schematron">
  <teiHeader>
    <fileDesc>
      <titleStmt>
        <title type="main">Tido Project Specific Customization of the Music Encoding Initiative
          Guidelines</title>
        <author xml:id="RV">Raffaele Viglianti</author>
        <author xml:id="ZK">Zoltán Kőmíves</author>
        <author xml:id="AE">Alexander Erhard</author>
      </titleStmt>
      <publicationStmt>
        <publisher>Tido (UK) Ltd.</publisher>
        <availability>
          <p>Copyright 2014-2016 Tido Ltd.</p>
          <p>Licensed under <ref target="https://opensource.org/licenses/ECL-2.0">Educational Community License 2.0</ref>
            you may not use this file except in compliance with the License. You may
            obtain a copy of the License at

            <ref target="https://opensource.org/licenses/ECL-2.0">https://opensource.org/licenses/ECL-2.0</ref>

            Unless required by applicable law or agreed to in writing,
            software distributed under the License is distributed on an "AS IS"
            BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
            or implied. See the License for the specific language governing
            permissions and limitations under the License.
          </p>
        </availability>
      </publicationStmt>
      <sourceDesc>
        <p>Born digital.</p>
      </sourceDesc>
    </fileDesc>
    <encodingDesc>
      <tagsDecl>
        <rendition xml:id="afterStaff" scheme="free">
          <ptr target="../test/jade/wrappers/afterStaff.jade"/>
        </rendition>
        <rendition xml:id="afterTwoStaves" scheme="free">
          <ptr target="../test/jade/wrappers/afterTwoStaves.jade"/>
        </rendition>
        <rendition xml:id="inInitialScoreDef" scheme="free">
          <ptr target="../test/jade/wrappers/inInitialScoreDef.jade"/>
        </rendition>
        <rendition xml:id="inInitialStaffGrp" scheme="free">
          <ptr target="../test/jade/wrappers/inInitialStaffGrp.jade"/>
        </rendition>
        <rendition xml:id="inInitialStaffDefGrp" scheme="free">
          <ptr target="../test/jade/wrappers/inInitialStaffDefGrp.jade"/>
        </rendition>
        <rendition xml:id="inLayer" scheme="free">
          <ptr target="../test/jade/wrappers/inLayer.jade"/>
        </rendition>
        <rendition xml:id="inSection" scheme="free">
          <ptr target="../test/jade/wrappers/inSection.jade"/>
        </rendition>
        <rendition xml:id="inLayerAfterMeasureWithFourQuarters" scheme="free">
          <ptr target="../test/jade/wrappers/inLayerAfterMeasureWithFourQuarters.jade"/>
        </rendition>
        <rendition xml:id="inLayerBeforeMeasureWithFourQuarters" scheme="free">
          <ptr target="../test/jade/wrappers/inLayerBeforeMeasureWithFourQuarters.jade"/>
        </rendition>
        <rendition xml:id="inMeasure" scheme="free">
          <ptr target="../test/jade/wrappers/inMeasure.jade"/>
        </rendition>
        <rendition xml:id="inScore" scheme="free">
          <ptr target="../test/jade/wrappers/inScore.jade"/>
        </rendition>
        <rendition xml:id="inScoreDef" scheme="free">
          <ptr target="../test/jade/wrappers/inScoreDef.jade"/>
        </rendition>
        <rendition xml:id="inScoreinSection" scheme="free">
          <ptr target="../test/jade/wrappers/inScoreinSection.jade"/>
        </rendition>
        <rendition xml:id="inStaffDefAfterLastMeasure" scheme="free">
          <ptr target="../test/jade/wrappers/inStaffDefAfterLastMeasure.jade"/>
        </rendition>
        <rendition xml:id="twoStavesInMeasure" scheme="free">
          <ptr target="../test/jade/wrappers/twoStavesInMeasure.jade"/>
        </rendition>
      </tagsDecl>
    </encodingDesc>
  </teiHeader>
  <text>
    <front>
      <divGen type="toc"/>
    </front>
    <body>
      <div>
        <head>Introduction</head>
        <p>This document provides a minimal MEI customization in order to define a very basic
          subset of elements with appropriate restrictions for basic use cases.
          For general information about MEI, please refer to the
          <ref target="http://music-encoding.org/documentation/guidelines2013/chapters">MEI
            Guidelines</ref>. Please note however, that this customization builds on the
          <ref target="https://github.com/tido/music-encoding/tree/develop">development branch</ref>
          of the MEI project, which is more advanced than the current release.

          Each restriction is implemented using the
          <ref target="http://www.tei-c.org/Guidelines/Customization/odds.xml">TEI ODD</ref> specification language,
          and documented in the prose section of this document, including examples (what is valid)
          and counter-examples (what is invalid).</p>
        <p>The <ref target="#tidoSchemaSpec">Specifications</ref> section lists every element available in the customization
          and can be used as a technical reference.</p>
      </div>
      <div>
        <head>Module Selection</head>
        <p>This basic customization only adopts following modules:</p>
        <list rend="bulleted">
          <item>MEI</item>
          <item>MEI.shared</item>
          <item>MEI.header</item>
          <item>MEI.cmn</item>
          <item>MEI.cmnOrnaments</item>
          <item>MEI.critapp</item>
          <item>MEI.edittrans</item>
          <item>MEI.externalsymbols</item>
          <item>MEI.fingering</item>
          <item>MEI.lyrics</item>
          <item>MEI.namesdates</item>
          <item>MEI.ptrref</item>
          <item>MEI.text</item>
          <item>MEI.usersymbols</item>
        </list>
      </div>
      <div>
        <head>Common Attributes</head>
        <p><att>xml:id</att> is mandatory on all elements, <att>n</att> is mandatory on: <list rend="bulleted">
          <item><gi>layer</gi></item>
          <item><gi>staff</gi></item>
          <item><gi>staffDef</gi></item>
          <item><gi>verse</gi></item>
        </list></p>
      </div>
      <div>
        <head>Clefs, Time and Key Signatures</head>
        <div>
          <head>Time signature</head>
          <p>Time signature <emph>must</emph> be expressed in a <gi>meterSig</gi> child element of
              <gi>staffDef</gi>.</p>
          <p>To define a time signature, the customization uses <att>unit</att> and <att>count</att> on
              <gi>meterSig</gi>. Both attributes are required.</p>
          <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
            rendition="#inSection">
            <staffDef n="1" xml:id="d001">
              <meterSig count="4" unit="4" xml:id="d002"/>
            </staffDef>
          </egXML>
          <p>The optional <att>sym</att> attribute can be used to express cut or common time.</p>
          <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
            rendition="#inSection">
            <staffDef n="1" xml:id="d003">
              <meterSig count="4" unit="4" sym="cut" xml:id="d004"/>
            </staffDef>
          </egXML>
          <p>Attributes for encoding time signatures on <gi>scoreDef</gi> and <gi>staffDef</gi> are
            excluded from the schema.</p>
        </div>
        <div>
          <head>Key signature</head>
          <p>Key signature <emph>must</emph> be expressed in a <gi>keySig</gi> child element
            of <gi>staffDef</gi> at this stage of development.</p>
          <p>To define a key signature, the customization uses the <att>pname</att>, <att>accid</att> and
              <att>mode</att> attributes of <gi>keySig</gi>. <att>pname</att> and <att>mode</att>
            <emph>must</emph> occur together, <att>accid</att> is optional.</p>
          <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
            rendition="#inSection">
            <staffDef n="1" xml:id="d005">
              <keySig pname="f" accid="s" mode="major" xml:id="d006"/>
            </staffDef>
          </egXML>
          <p>Attributes for encoding key signatures on <gi>scoreDef</gi> and <gi>staffDef</gi> are
            excluded from the schema.</p>
        </div>
        <div>
          <head>Clefs</head>
          <p>Clefs <emph>must</emph> be expressed using the <gi>clef</gi> element.</p>
          <p>To define a clef, the customization uses <att>shape</att> and <att>line</att>, which
              <emph>must</emph> occur together.</p>
          <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
            rendition="#inSection">
            <staffDef lines="5" n="1" xml:id="d007">
              <clef shape="G" line="2" xml:id="d008"/>
            </staffDef>
          </egXML>
          <p>Attributes for encoding clefs on <gi>scoreDef</gi> and <gi>staffDef</gi> are excluded
            from the schema.</p>
        </div>
      </div>
      <div>
        <head>Staff groups</head>
        <p>Like in mei_all, <gi>staffGrp</gi> elements may contain <att>barthru</att> and <att>symbol</att>
          attributes to specify the appearance of a staff group.</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inInitialScoreDef">
          <staffGrp symbol="bracket" barthru="true" xml:id="d009">
            <staffDef lines="5" xml:id="d010" n="2">
              <clef shape="G" line="2" xml:id="d011"/>
            </staffDef>
          </staffGrp>
        </egXML>
        <p>Both attributes are optional.</p>
        <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inInitialScoreDef">
          <staffGrp xml:id="d012">
            <staffDef lines="5" xml:id="d013" n="2">
              <clef shape="G" line="2" xml:id="d014"/>
            </staffDef>
          </staffGrp>
        </egXML>
        <p>When omitted, <att>symbol</att> defaults to <val>none</val>; <att>barthru</att> to <val>false</val>.</p>
      </div>
      <div>
        <head>Events</head>
        <p>This section describes restrictions to timed events on staves, such as notes or rests.</p>
        <div>
          <head>Notes</head>
          <p>Notes must either have an octave and a pitch name or a <att>loc</att> attribute. Stem direction remains optional,
            but is recommended. Notes within chords must not express stem information and duration</p>
          <p>This is a typical note:</p>
          <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
            <note pname="a" oct="4" dur="4" stem.dir="up" xml:id="d015"/>
          </egXML>
        </div>
        <div>
          <head>Chords</head>
          <p>Cross-staff chords can be encoded by adding a <att>staff</att> attribute to each note that
            should get rendered in a different staff.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#twoStavesInMeasure">
              <measure n="1" xml:id="d016">
                <staff n="1" xml:id="d017">
                  <layer n="1" xml:id="d018">
                    <chord tstamp="1" stem.dir="up" dur="4" xml:id="d019">
                      <note pname="c" oct="4" xml:id="d020"/>
                      <note pname="g" oct="2" staff="2" xml:id="d021"/>
                    </chord>
                  </layer>
                </staff>
                <staff n="2" xml:id="d022">
                  <layer n="1" xml:id="d023">
                    <note pname="c" oct="2" dur="4" stem.dir="down" xml:id="d024"/>
                  </layer>
                </staff>
              </measure>
            </egXML>
        </div>
        <div>
          <head>Duration and stem direction</head>
          <p>The gestural duration attribute <att>dur.ges</att> is excluded in this customization.
            In addition, the specification of the <att>dur</att> and <att>stem.dir</att> attributes
            on events is more tightly  controlled than it is in <emph>mei_all</emph>, as described
            in the following sections.
          </p>
          <div>
            <head>Notes</head>
            <p>Notes must always have a duration (<att>dur</att>) and a stem direction (<att>stem.dir</att>)
              except when they are part of a chord.</p>
          </div>
          <div>
            <head>Rests and spaces</head>
            <p><gi>rest</gi> and <gi>space</gi> elements must always have a duration (<att>dur</att>).</p>
          </div>
          <div>
            <head>Chords</head>
            <p>Duration and stem direction on chords must be expressed on the <gi>chord</gi> element. The constituent
                <gi>note</gi> elements are not allowed to express duration or stem direction.</p>
            <list rend="bulleted">
              <item>Duration on chord: <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                  rendition="#inLayer">
                  <chord dur="4" stem.dir="up" xml:id="d025">
                    <note pname="a" oct="4" xml:id="d026"/>
                    <note pname="f" oct="4" xml:id="d027"/>
                  </chord>
                </egXML>
              </item>
              <item>Durations on child notes are not allowed: <egXML
                  xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                  <chord dur="4" stem.dir="up" xml:id="d028">
                    <note pname="a" oct="4" dur="4" xml:id="d029"/>
                    <note pname="f" oct="4" dur="4" xml:id="d030"/>
                  </chord>
                </egXML>
              </item>
              <item>Stem directions on child notes are not allowed: <egXML
                xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <chord dur="4" stem.dir="up" xml:id="d031">
                  <note pname="a" oct="4" stem.dir="up" xml:id="d032"/>
                  <note pname="f" oct="4" stem.dir="up" xml:id="d033"/>
                </chord>
              </egXML>
              </item>
            </list>
          </div>
        </div>
        <div>
          <head>Control events</head>
          <div>
            <head>Placement relative to staves</head>
            <p>Some control events, such as <gi>hairpin</gi>, <gi>dynam</gi>, etc. can be placed either directly
              above or below a single staff or in the middle between two staves. Placement above or
              below a staff is indicated by the <att>place</att> attribute,
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterTwoStaves">
                <dynam tstamp="1" layer="1" xml:id="d034" place="below" staff="1"/>
              </egXML>
              placement between two staves is expressed by specifying the numbers of both staves
              in the <att>staff</att> attribute.
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterTwoStaves">
                <dynam tstamp="1" xml:id="d035" staff="1 2"/>
              </egXML>
              When the <att>staff</att> attribute has multiple values,
              <att>place</att> and <att>layer</att> are not allowed:</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterTwoStaves">
              <dynam tstamp="1" layer="1" xml:id="d036" place="above" staff="1 2"/>
            </egXML>
          </div>
          <div>
            <head>Spanning elements</head>
            <div>
              <head>Hairpins</head>
              <p>Start and end point of <gi>hairpin</gi> elements must be expressed using <att>tstamp</att> and
                <att>tstamp2</att> respectively. <att>startid</att> and <att>endid</att> attributes
                are currently disabled on hairpins.
              </p>
            </div>
            <div>
              <head>Slurs and Ties</head>
              <p>In this customization, slurs and ties are always encoded as elements.</p>
              <p>Since slurs almost always connect notes with other notes,
                their start and end points can nearly always be expressed using the
                <att>startid</att> and <att>endid</att> attributes. Only exceptions are
                <soCalled>partial</soCalled> slurs, such as the ones at the boundary of
                <gi>ending</gi> elements. Such slurs need to be encoded using the <att>tstamp</att>
                or <att>tstamp2</att> attributes. When the inclompete slur starts at the barline,
                <code>@tstamp="0"</code> is used, when the slur is incomplete at its end point,
                <code>@tstamp2="0m+n"</code> is applied (where n is the meter.count of the current
                measure plus one: 5 in 4/4, 3 in 2/4 etc. see <ref
                  target="http://music-encoding.org/documentation/2.1.1/cmn/#cmnTstamp">4.1.5 Timestamps
                  and Durations</ref> of the MEI Guidelines). Additionally, all partial
                slurs have to be supplied with a <att>curvedir</att> attribute indicating the direction of
                the slur (values: <val>above</val> or <val>below</val>).
              </p>
              <p>On the other hand, tstamps are not always enough to describe start and end point of slurs
                (think of a slur in the upper voice, while the lower voice has no slur), therefore we must allow
                the use of both <att>startid</att>/<att>endid</att> and <att>tstamp</att>/<att>tstamp2</att>.

                Since it is simply impractical to assert in which situation which encoding is expected,
                no asserted restrictions apply for using combinations of these attributes to describe
                start and end points of slurs, however, it is required that when tstamps are used,
                the tstamp has to be unambiguously resolved to a single note or chord event.
              </p>
              <p>A typical slur: </p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <slur xml:id="d037" startid="#n01" endid="#n02"/>
              </egXML>
              <p>A partial slur within a 2nd ending:</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <slur xml:id="d038" tstamp="0" endid="#n02"/>
              </egXML>
            </div>
            <div>
              <head>Pedals</head>
              <p><gi>pedal</gi> elements are required to form consistent sequences: Each
                <gi>pedal</gi> with a <att>dir</att> value of <val>bounce</val> or <val>up</val>
                must match its closest preceding <gi>pedal</gi> element in its <att>form</att>
                attribute.</p>
            </div>
            <div>
              <head>Octave displacement</head>
              <p>Octave displacement can be encoded using the <gi>octave</gi> element. Both <att>dis</att>
                and <att>dis.place</att> attributes are required.</p>
              <list rend="bulleted">
                <item>
                  <label>A valid <gi>octave</gi> element with all required attributes</label>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                    <octave staff="1" layer="1" tstamp="2" tstamp2="0m+2" dis="8" dis.place="above" xml:id="d039"/>
                  </egXML>
                </item>
                <item>
                  <label>An invalid <gi>octave</gi> element without <att>dis</att></label>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                    <octave staff="1" layer="1" tstamp="2" tstamp2="0m+2" dis.place="above" xml:id="d040"/>
                  </egXML>
                </item>
                <item>
                  <label>An invalid <gi>octave</gi> element without <att>dis.place</att></label>
                  <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                    <octave staff="1" layer="1" tstamp="2" tstamp2="0m+2" dis="8" xml:id="d041"/>
                  </egXML>
                </item>
              </list>
            </div>
          </div>
          <div>
            <head>Directives</head>
            <p>MEI provides the general-purpose element <gi>dir</gi> for directives of any kind; for a
              set of directives like tempo, fingering, etc., dedicated elements are available
              (e.g. <gi>tempo</gi>, <gi>fing</gi> and <gi>fingGrp</gi>). In the Tido customization,
              using the dedicated elements is required whenever such an element is available. When
              the <gi>dir</gi> element is used, it needs to contain a <att>type</att> attribute with
              one of the pre-defined values.</p>
            <list rend="bulleted">
              <item>
                <label>A valid fingering encoded using the <gi>fing</gi> element</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <fing staff="1" layer="1" tstamp="2" place="above" xml:id="d042">1</fing>
                </egXML>
              </item>
              <item>
                <label>An invalid fingering encoded as a <gi>dir</gi> element of type <val>fingering</val></label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                  <dir type="fingering" staff="1" layer="1" tstamp="2" place="above" xml:id="d043">1</dir>
                </egXML>
              </item>
              <item>
                <label>A valid expression marking encoded as a <gi>dir</gi> element of type <val>expression</val></label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <dir type="expression" staff="1" layer="1" tstamp="2" place="above" xml:id="d044">dolce</dir>
                </egXML>
              </item>
              <item>
                <label>A valid technical directive encoded as a <gi>dir</gi> element of type <val>technique</val></label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <dir type="technique" staff="1" layer="1" tstamp="2" place="above" xml:id="d045">con legno</dir>
                </egXML>
              </item>
              <item>
                <label>A valid tempo directive using the <gi>tempo</gi> element</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <tempo staff="1" layer="1" tstamp="2" place="above" xml:id="d046">Andante</tempo>
                </egXML>
              </item>
              <item>
                <label>An invalid tempo directive encoded as a <gi>dir</gi> element of type <val>tempo</val></label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                  <dir type="tempo" staff="1" layer="1" tstamp="2" place="above" xml:id="d047">Andante</dir>
                </egXML>
              </item>
              <item>
                <label>An invalid directive encoded without a <att>type</att> attribute</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                  <dir staff="1" layer="1" tstamp="2" place="above" xml:id="d048">dolce</dir>
                </egXML>
              </item>
              <item>
                <label>An invalid directive with an unsupported value in <att>type</att></label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                  <dir type="unsupported" staff="1" layer="1" tstamp="2" place="above" xml:id="d049">unsupported</dir>
                </egXML>
              </item>
            </list>
          </div>
          <div>
            <head>Fingerings</head>
            <p>Fingerings must be encoded using the <gi>fing</gi> element. fingerings
              can be grouped by using the <gi>fingGrp</gi> element which has a mandatory
              <att>form</att> attribute. <gi>fingGrp</gi> elements can be nested to
              express more complex fingerings.</p>
            <list rend="bulleted">
              <item>
                <label>A valid encoding of a fingering change</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <fingGrp staff="1" layer="1" tstamp="2" place="above" xml:id="d050" form="subst">
                    <fing xml:id="d051">1</fing>
                    <fing xml:id="d052">2</fing>
                  </fingGrp>
                </egXML>
              </item>
              <item>
                <label>A valid encoding of a combination of fingerings</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <fingGrp staff="1" layer="1" tstamp="2" place="above" xml:id="d053" form="combi">
                    <fing xml:id="d054">1</fing>
                    <fing xml:id="d055">3</fing>
                    <fing xml:id="d056">5</fing>
                  </fingGrp>
                </egXML>
              </item>
              <item>
                <label>A valid encoding of a combination of fingerings in which the upper finger changes</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                  <fingGrp staff="1" layer="1" tstamp="2" place="above" xml:id="d057" form="combi">
                    <fingGrp form="subst" xml:id="d058">
                      <fing xml:id="d059">1</fing>
                      <fing xml:id="d060">2</fing>
                    </fingGrp>
                    <fing xml:id="d061">3</fing>
                    <fing xml:id="d062">5</fing>
                  </fingGrp>
                </egXML>
              </item>
              <item>
                <label>An invalid fingering group without the <att>form</att> attribute</label>
                <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                  <fingGrp staff="1" layer="1" tstamp="2" place="above" xml:id="d063">
                    <fing xml:id="d064">1</fing>
                    <fing xml:id="d065">2</fing>
                  </fingGrp>
                </egXML>
              </item>
            </list>
          </div>
          <div>
            <head>Fermatas</head>
            <p><gi>fermata</gi> elements must have <att>tstamp</att> and <att>place</att> attributes.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
              <fermata staff="1" layer="1" tstamp="2" place="above" xml:id="d066"/>
            </egXML>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
              <fermata staff="1" layer="1" place="above" xml:id="d067"/>
            </egXML>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
              <fermata staff="1" layer="1" tstamp="2" xml:id="d068"/>
            </egXML>
            <p><att>tstamp2</att>, <att>startid</att> and <att>endid</att> are not allowed on <gi>fermata</gi>
              elements.</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
              <fermata staff="1" layer="1" tstamp="2" tstamp2="2m+2" place="above" xml:id="d069"/>
            </egXML>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
              <fermata staff="1" layer="1" tstamp="2" startid="#n01" xml:id="d070"/>
            </egXML>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
              <fermata staff="1" layer="1" tstamp="2" endid="#n01" xml:id="d071"/>
            </egXML>
          </div>
          <div>
            <head>Ornamentation</head>
            <!-- TODO update paragraphs -->
             <!-- <p>MEI uses three main classes of ornaments: trill, turn, and mordent. Complex ornaments can
               be encoded by combining these classes. Moreover, many ornaments with the same expansion
               may have different symbols. MEI prioritizes encoding the meaning of the ornament and not
               its symbol, but symbols can be defined and mapped to the encoding.</p>
             <p>This section offers encoding examples for every ornament in the SMuFL standard, excluding
               acciaccatura and appoggiatura, which are encoded with <gi>note</gi>. This is only meant to
               show typical encoding of these symbols in Tido; each symbol may in fact correspond to any
               number of encodings because these are symbols with a rich history that defies
               standardization.</p> -->
            <div>
              <head>Examples</head>
              <p>Trill. In MEI trills are agnostic about the starting note (i.e. written or
                ornamenting).</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <trill staff="1" layer="1" place="above" tstamp="1" glyphname="ornamentTrill" xml:id="d072"/>
              </egXML>
              <p>Turn. Begins on the note above the written note.</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <turn staff="1" layer="1" place="above" form="norm" tstamp="1" glyphname="ornamentTurn" xml:id="d073"/>
              </egXML>
              <p>Turn with slash. Begins on the note below the written note. </p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <turn staff="1" layer="1" place="above" form="inv" tstamp="1" glyphname="ornamentTurnSlash" xml:id="d074"/>
              </egXML>
              <p>Mordent. Performed as the written note, followed by its lower neighbor, with a return to
                the written note. </p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <mordent staff="1" layer="1" place="above" form="norm" tstamp="1" glyphname="ornamentMordent" xml:id="d075"/>
              </egXML>
              <p>Inverted mordent. Performed as the principal note, followed by its upper neighbor, with a
                return to the principal note. </p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <mordent staff="1" layer="1" place="above" form="inv" tstamp="1" glyphname="ornamentMordentInverted" xml:id="d076"/>
              </egXML>
              <p>Tremblement. Equivalent to a trill. </p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <trill staff="1" layer="1" place="above" tstamp="1" glyphname="ornamentTremblement" xml:id="d077"/>
              </egXML>
              <p>Haydn ornament. Same as inverted mordent. </p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <mordent staff="1" layer="1" place="above" form="inv" tstamp="1" glyphname="ornamentMordentInverted" xml:id="d078"/>
              </egXML>
            </div>
            <div>
              <head>Expansion</head>
              <p>Expansions of ornaments must be encoded in the event stream of the score
                using a <gi>choice</gi> element which contains the original notation wrapped in an
                <gi>orig</gi> and the expanded version wrapped in a <gi>reg</gi> element. The
                corresponding ornament must be encoded likewise, with <gi>choice</gi> wrapping an
                <gi>orig</gi> element containing the ornament and an empty <gi>reg</gi> element.</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inSection">
                <measure n="22" xml:id="d079">
                  <staff n="1" xml:id="d080">
                    <layer n="1" xml:id="d081">
                      <choice xml:id="d082">
                        <orig xml:id="d083">
                          <note dur="4" oct="5" pname="c" stem.dir="down" xml:id="d084"/>
                        </orig>
                        <reg xml:id="d085">
                          <note stem.dir="down" dur="32" oct="5" pname="d" xml:id="d086"/>
                          <note stem.dir="down" dur="32" oct="5" pname="c" xml:id="d087"/>
                          <note stem.dir="down" dur="32" oct="5" pname="d" xml:id="d088"/>
                          <note stem.dir="down" dur="32" oct="5" pname="c" xml:id="d089"/>
                          <note stem.dir="down" dur="32" oct="5" pname="d" xml:id="d090"/>
                          <note stem.dir="down" dots="1" dur="16" oct="5" pname="c" xml:id="d091"/>
                        </reg>
                      </choice>
                    </layer>
                  </staff>
                  <choice xml:id="d092">
                    <orig xml:id="d093">
                      <trill place="above" staff="1" layer="1" tstamp="1" xml:id="d094"/>
                    </orig>
                    <reg xml:id="d095"/>
                  </choice>
                </measure>
              </egXML>
             </div>
          </div>
          <div>
            <head>Musical Symbols</head>
            <p>Musical symbols can be included in text elements by providing a <gi>symbol</gi>
              element with a <att>glyphname</att> attribute containing the SMuFL name of the
              glyph. For a list of available glyphs, see <ref target="http://www.smufl.org/version/latest/"
              >SMuFL</ref>.</p>
            <p>A valid <gi>symbol</gi> element referencing a quarter note glyph</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
              <tempo staff="1" layer="1" tstamp="2" place="above" xml:id="d096"><symbol xml:id="d097" glyphname="noteQuarterUp"/></tempo>
            </egXML>
          </div>
        </div>
      </div>
    </body>
    <back>
      <div xml:id="tidoSchemaSpec">
        <head>Specifications</head>
        <schemaSpec ident="tido" ns="http://www.music-encoding.org/ns/mei"
          start="mei music body mdiv" prefix="tido_">

          <constraintSpec ident="set_ns" scheme="isoschematron">
            <constraint>
              <sch:ns xmlns:sch="http://purl.oclc.org/dsdl/schematron" prefix="mei"
                uri="http://www.music-encoding.org/ns/mei"/>
            </constraint>
          </constraintSpec>

          <moduleRef key="MEI"/>
          <moduleRef key="MEI.shared"
            except=" actor annot arranger artic author barLine bibl biblList biblScope caption
            castGrp castItem castList clefGrp composer creation custos date depth distributor
            div dot edition editor event eventList expansion extent funder genre group grpSym
            head height identifier imprint incip keyAccid label layerDef lb librettist lyricist name
            num pad part parts pb pgDesc pgFoot pgFoot2 pgHead pgHead2 phrase physLoc publisher
            pubPlace recipient relatedItem repository resp role roleDesc sb series sponsor stack
            textLang titlePage width"/>
          <moduleRef key="MEI.header"
            except=" accessRestrict acqSource altId appInfo application audience byline captureMode
            carrierForm change changeDesc classCode classification condition contentItem contents
            context correction dimensions editionStmt editorialDecl exhibHist fileChar fingerprint
            hand handList history incipCode incipText inscription interpretation key language langUsage
            mensuration meter normalization notesStmt otherChar perfDuration perfMedium perfRes
            perfResList physDesc physMedium plateNum playingSpeed price provenance revisionDesc
            samplingDecl scoreFormat segmentation soundChan source sourceDesc specRepro stdVals
            sysReq term termList trackConfig treatHist treatSched unpub watermark work workDesc"/>
          <moduleRef key="MEI.cmn" except=" arpeg beamSpan beatRpt bend breath bTrem fTrem
            gliss halfmRpt harpPedal meterSigGrp mRpt mRpt2 mSpace multiRest multiRpt ossia
            phrase reh tuplet tupletSpan"/>
          <moduleRef key="MEI.cmnOrnaments"/>
          <moduleRef key="MEI.critapp" except="app lem rdg"/>
          <moduleRef key="MEI.edittrans"
            except=" abbr add corr damage del expan gap handShift restore sic subst supplied unclear"/>
          <moduleRef key="MEI.externalsymbols"/>
          <moduleRef key="MEI.fingering"/>
          <moduleRef key="MEI.lyrics" except="lyrics"/>
          <moduleRef key="MEI.namesdates" except="geogName periodName persName styleName"/>
          <moduleRef key="MEI.ptrref" except="ptr ref"/>
          <moduleRef key="MEI.text" except="back front l lg li list quote"/>
          <moduleRef key="MEI.usersymbols"
            except="anchoredText curve line mapping propName propValue symbolDef symName symProp symbolTable"/>

          <classSpec ident="att.notationtype" module="MEI" type="atts" mode="delete"/>
          <classSpec ident="att.accid.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.accid.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.accid.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.accid.log" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.controlevent" mode="delete"/>
            </classes>
            <attList>
              <attDef ident="func" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.altsym" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.articulation.performed" module="MEI.shared" type="atts"
            mode="delete"/>
          <classSpec ident="att.authorized" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.barplacement" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.bibl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.canonical" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.chord.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.chord.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.clef.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.clef.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.clef.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.clef.log" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="cautionary" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.cleffing.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.cleffing.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.color" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.coloration" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.curvature" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.curverend" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.datable" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.datapointing" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.declaring" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.distances" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.duration.additive" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.duration.default" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.duration.performed" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.dynam.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.dynam.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.enclosingchars" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.endings" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.extender" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.fermatapresent" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.fermata.vis" module="MEI.cmn" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.typography" mode="delete"/>
            </classes>
            <attList>
              <attDef ident="form" usage="opt" mode="delete"/>
              <attDef ident="shape" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.filing" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.horizontalalign" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.id" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="xml:id" usage="req" mode="change">
                <datatype>
                  <rng:data type="ID"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid <gi>note</gi> element with the required <att>xml:id</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note pname="a" oct="4" dur="4" stem.dir="up"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>note</gi> element without the required <att>xml:id</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note pname="a" oct="4" dur="4" stem.dir="up"/>
              </egXML>
            </exemplum>
          </classSpec>
          <classSpec ident="att.instrumentident" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.joined" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.keySig.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.keySig.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.keySig.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.keySigDefault.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.keySigDefault.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.labels.addl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.lang" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.layer.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.layer.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.layer.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.layer.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.linerend" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.linerend.base" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.lyricstyle" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.measure.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.measure.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.measurement" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.measurenumbers" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterSig.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterSig.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterSig.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterSigDefault.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterSigDefault.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterconformance" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.meterconformance.bar" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="control" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.mmtempo" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.multinummeasures" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.notationstyle" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.note.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.note.ges" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.articulation.performed" mode="delete"/>
              <memberOf key="att.duration.performed" mode="delete"/>
              <memberOf key="att.instrumentident" mode="delete"/>
              <memberOf key="att.midivelocity" mode="delete"/>
              <memberOf key="att.note.ges.mensural" mode="delete"/>
              <memberOf key="att.note.ges.tablature" mode="delete"/>
            </classes>
            <attList>
              <attDef ident="oct.ges" usage="opt" mode="delete"/>
              <attDef ident="pname.ges" usage="opt" mode="delete"/>
              <attDef ident="pnum" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.noteheads" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.octavedefault" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.onelinestaff" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.optimization" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.ornam.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.ornam.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.ornam.vis" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.extsym" mode="delete"/>
              <memberOf key="att.ornam.extsym" mode="add"/>
            </classes>
          </classSpec>
          <classSpec ident="att.pages" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.plist" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.pointing" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.relativesize" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.responsibility" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.rest.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.rest.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.rest.vis" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.typography" mode="delete"/>
            </classes>
          </classSpec>
          <classSpec ident="att.scalable" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.score.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.score.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.score.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.score.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.log.mensural" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.section.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.section.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.section.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.section.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.slurpresent" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.space.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.space.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.space.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.spacing" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staff.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staff.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staff.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staff.vis" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffDef.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffDef.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffDef.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffDef.vis" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="grid.show" usage="opt" mode="delete"/>
              <attDef ident="layerscheme" usage="opt" mode="delete"/>
              <attDef ident="lines.color" usage="opt" mode="delete"/>
              <attDef ident="lines.visible" usage="opt" mode="delete"/>
              <attDef ident="spacing" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.staffGrp.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffGrp.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffGrp.log" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.staffloc.pitched" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.stems" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="stem.dir" usage="opt" mode="replace">
                <desc>Describes the direction of a stem.</desc>
                <datatype>
                  <rng:ref name="data.STEMDIRECTION"/>
                </datatype>
              </attDef>
              <attDef ident="stem.len" usage="opt" mode="delete"/>
              <attDef ident="stem.mod" usage="opt" mode="delete"/>
              <attDef ident="stem.pos" usage="opt" mode="delete"/>
              <attDef ident="stem.x" usage="opt" mode="delete"/>
              <attDef ident="stem.y" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.syl.anl" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.syl.ges" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.syltext" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.systems" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.textstyle" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.tiepresent" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.timestamp.performed" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.transposition" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.tupletpresent" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visibility" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset.ho" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset.to" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset.vo" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset2" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset2.ho" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset2.to" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.visualoffset2.vo" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.whitespace" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.width" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.xy" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.xy2" module="MEI.shared" type="atts" mode="delete"/>
          <classSpec ident="att.beam.anl" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beam.ges" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beam.log" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beam.vis" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beamed" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beamedwith" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beaming.log" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beaming.vis" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beamrend" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.beamsecondary" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.chord.log.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.chord.vis.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.fermata.anl" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.fermata.ges" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.graced" module="MEI.cmn" type="atts" mode="change">
            <attList>
              <attDef ident="grace.time" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.hairpin.anl" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.hairpin.ges" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.hairpin.vis" module="MEI.cmn" type="atts" mode="change">
            <attList>
              <attDef ident="opening" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.lvpresent" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.measure.vis" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.note.ges.cmn" module="MEI.cmn" type="atts" mode="change">
            <attList>
              <attDef ident="gliss" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.note.log.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.note.vis.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.octave.log" module="MEI.cmn" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.octavedisplacement" mode="delete"/>
              <memberOf key="att.octavedisplacement.req" mode="add"/>
            </classes>
            <attList>
              <attDef ident="coll" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.pedal.anl" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.pedal.ges" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.pianopedals" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.rehearsal" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.rest.log.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.rest.vis.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.log.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.scoreDef.vis.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.slur.anl" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.slur.ges" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.slur.vis" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.slurrend" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.space.log.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.staffDef.log.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.staffDef.vis.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.stems.cmn" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.tie.anl" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.tie.ges" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.tie.vis" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.tierend" module="MEI.cmn" type="atts" mode="delete"/>
          <classSpec ident="att.mordent.anl" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.mordent.ges" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.mordent.vis" module="MEI.cmnOrnaments" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.extsym" mode="delete"/>
              <memberOf key="att.ornam.extsym" mode="add"/>
            </classes>
          </classSpec>
          <classSpec ident="att.ornam" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.ornamentaccid" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.trill.anl" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.trill.ges" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.trill.vis" module="MEI.cmnOrnaments" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.extsym" mode="delete"/>
              <memberOf key="att.ornam.extsym" mode="add"/>
            </classes>
          </classSpec>
          <classSpec ident="att.turn.anl" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.turn.ges" module="MEI.cmnOrnaments" type="atts" mode="delete"/>
          <classSpec ident="att.turn.vis" module="MEI.cmnOrnaments" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.extsym" mode="delete"/>
              <memberOf key="att.ornam.extsym" mode="add"/>
            </classes>
          </classSpec>
          <classSpec ident="att.source" module="MEI.critapp" type="atts" mode="delete"/>
          <classSpec ident="att.edit" module="MEI.edittrans" type="atts" mode="delete"/>
          <classSpec ident="att.evidence" module="MEI.edittrans" type="atts" mode="delete"/>
          <classSpec ident="att.extsym" module="MEI.externalsymbols" type="atts" mode="change">
            <attList>
              <attDef ident="glyphnum" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.fing.anl" module="MEI.fingering" type="atts" mode="delete"/>
          <classSpec ident="att.fing.ges" module="MEI.fingering" type="atts" mode="delete"/>
          <classSpec ident="att.fingGrp.anl" module="MEI.fingering" type="atts" mode="delete"/>
          <classSpec ident="att.fingGrp.ges" module="MEI.fingering" type="atts" mode="delete"/>
          <classSpec ident="att.fingGrp.log" module="MEI.fingering" type="atts" mode="change">
            <attList>
              <attDef ident="form" usage="req" mode="change">
                <valList type="closed">
                  <valItem ident="alter">
                    <desc>alternation of fingers.</desc>
                  </valItem>
                  <valItem ident="combi">
                    <desc>combination of fingers.</desc>
                  </valItem>
                  <valItem ident="subst">
                    <desc>substitution of fingers.</desc>
                  </valItem>
                </valList>
              </attDef>
            </attList>
          </classSpec>
          <classSpec ident="att.fingGrp.vis" module="MEI.fingering" type="atts" mode="change">
            <attList>
              <attDef ident="orient" usage="opt" mode="delete"/>
            </attList>
          </classSpec>
          <classSpec ident="att.verse.anl" module="MEI.lyrics" type="atts" mode="delete"/>
          <classSpec ident="att.verse.ges" module="MEI.lyrics" type="atts" mode="delete"/>
          <classSpec ident="att.verse.log" module="MEI.lyrics" type="atts" mode="delete"/>
          <classSpec ident="att.verse.vis" module="MEI.lyrics" type="atts" mode="delete"/>

          <macroSpec ident="data.STEMDIRECTION.extended" module="MEI" type="dt" mode="delete"/>

          <classSpec ident="model.keySigLike" module="MEI.shared" type="model" mode="change">
            <classes mode="change">
              <memberOf key="model.eventLike" mode="delete"/>
            </classes>
          </classSpec>
          <classSpec ident="model.meterSigLike" module="MEI.shared" type="model" mode="change">
            <classes mode="change">
              <memberOf key="model.eventLike" mode="delete"/>
            </classes>
          </classSpec>
          <classSpec ident="model.scorePart.mensuralAndNeumes" module="MEI.shared" type="model"
            mode="replace"/>
          <classSpec ident="model.sectionPart.mensuralAndNeumes" module="MEI.shared" type="model"
            mode="replace"/>
          <classSpec ident="model.staffPart.mensuralAndNeumes" module="MEI.shared" type="model"
            mode="replace"/>
          <classSpec ident="model.layerPart.mensuralAndNeumes" module="MEI.shared" type="model"
            mode="replace"/>
          <classSpec ident="att.startendid" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="endid" usage="opt" mode="change">
                <datatype>
                  <rng:ref name="data.URI.local"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid <gi>pedal</gi> element with a local URI reference in <att>startid</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" staff="1" startid="#n01" endid="#n02" xml:id="d098"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>pedal</gi> element with local URI references lacking the hash sign
                in <att>startid</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" staff="1" startid="n01" endid="#n02" xml:id="d099"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>pedal</gi> element with absolute URI references in
                  <att>startid</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <pedal place="below" xml:id="d100" dir="down" staff="1" layer="1"
                  startid="http://google.com#start" endid="#n02"/>
              </egXML>
            </exemplum>
          </classSpec>
          <classSpec ident="att.startid" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="startid" usage="opt" mode="change">
                <datatype>
                  <rng:ref name="data.URI.local"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid <gi>pedal</gi> element with a local URI reference in <att>endid</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" staff="1" startid="#n01" endid="#n02" xml:id="d101"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>pedal</gi> element with local URI references lacking the hash sign
                in <att>endid</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" staff="1" startid="#n01" endid="n02" xml:id="d102"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>pedal</gi> element with absolute URI references in
                  <att>endid</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <pedal place="below" layer="1" xml:id="d103" dir="down" staff="1"
                  startid="#n01" endid="http://google.com#end"/>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- require clef/@shape -->
          <classSpec ident="att.clefshape" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="shape" usage="req" mode="change">
                <datatype>
                  <rng:ref name="data.CLEFSHAPE"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid <gi>clef</gi> with a <att>shape</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d104" n="2">
                  <clef shape="G" line="2" xml:id="d105"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>clef</gi> without a <att>shape</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d106" n="2">
                  <clef line="2" xml:id="d107"/>
                </staffDef>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- require clef/@line -->
          <classSpec ident="att.lineloc" module="MEI.shared" type="atts" mode="change">
            <attList>
              <attDef ident="line" usage="req" mode="change">
                <datatype>
                  <rng:ref name="data.CLEFLINE"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid <gi>clef</gi> with a <att>line</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d108" n="2">
                  <clef shape="G" line="2" xml:id="d109"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>clef</gi> without a <att>line</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d110" n="2">
                  <clef shape="G" xml:id="d111"/>
                </staffDef>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- === CUSTOM CONTENT MACROS === -->
          <macroSpec ident="macro.availabilityPart" module="MEI.header" type="pe" mode="change">
            <!--
              overriding the content model of macro.availabilityPart is necessary only to
              prevent the TEI stylesheets from creating an invalid schema
            -->
            <content>
              <rng:optional>
                <rng:ref name="useRestrict"/>
              </rng:optional>
            </content>
          </macroSpec>
          <!-- === CUSTOM DATATYPES === -->
          <macroSpec ident="data.URI.local" module="MEI" type="dt" mode="add">
            <desc>A local URI starting with #</desc>
            <content>
              <rng:data type="token">
                <rng:param name="pattern">#[A-Za-z][A-Za-z0-9\-_:\.]*</rng:param>
              </rng:data>
            </content>
          </macroSpec>
          <macroSpec ident="data.MEASUREBEAT" module="MEI" type="dt" mode="change">
            <desc>A count of measures plus a beat location, i.e., [0-9]+m\+[0-9]+(\.?[0-9]*)?. The
              measure count is the number of barlines crossed by the event, while the beat location
              is a timestamp in the measure where the event ends. For example, dur="1m+3"
              indicates that the event ends in the next measure on beat 3. The measure number must
              be in the range of 0 to the number of remaining measures and the beat number must be
              in the range from 0 to the numerator of the time signature plus 1. For example, for an
              event starting in the first measure of a piece containing 6 measures in 6/8, the
              measure number must be between 0 to 5 and the beat number must be within the range
              from 0 to 7, e.g., "4m+3". The customization makes the measure part mandatory
              and disallows space characters.</desc>
            <content>
              <rng:data type="token">
                <rng:param name="pattern">[0-9]+m\+[0-9]+(\.?[0-9]*)?</rng:param>
              </rng:data>
            </content>
            <exemplum>
              <p>A valid <att>tstamp2</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterStaff">
                <slur tstamp="1" tstamp2="0m+2" xml:id="d112"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <att>tstamp2</att> containing spaces</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <slur tstamp="1" tstamp2="0m + 2" xml:id="d113"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <att>tstamp2</att> lacking a measure value</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <slur tstamp="1" tstamp2="2" xml:id="d114"/>
              </egXML>
            </exemplum>
          </macroSpec>
          <!-- === NEW ATTRIBUTE CLASSES === -->
          <!-- New attribute class for required octave displacement attributes -->
          <classSpec ident="att.octavedisplacement.req" module="MEI.shared" type="atts" mode="add">
            <attList>
              <attDef ident="dis" usage="req" mode="change">
                <datatype>
                  <rng:ref name="data.OCTAVE.DIS"/>
                </datatype>
              </attDef>
              <attDef ident="dis.place" usage="req" mode="change">
                <datatype>
                  <rng:ref name="data.PLACE"/>
                </datatype>
              </attDef>
            </attList>
          </classSpec>
          <!-- New attribute class for ornament glyphnames -->
          <classSpec ident="att.ornam.extsym" module="MEI.externalsymbols" type="atts" mode="add">
            <desc>Attributes used to associate ornaments with corresponding glyphs in SMuFL.</desc>
            <attList>
              <attDef ident="glyphname" usage="opt">
                <desc>provides a way of pointing to an ornament glyph.</desc>
                <valList type="closed">
                  <valItem ident="ornamentMordent">
                    <desc>Inverted mordent (Tido default symbol for mordent[@inv='true']).</desc>
                  </valItem>
                  <valItem ident="ornamentMordentInverted">
                    <desc>Mordent (Tido default symbol for mordent[not(@inv='true')]).</desc>
                  </valItem>
                  <valItem ident="ornamentTurn">
                    <desc>Turn (Tido default symbol for turn[not(@inv='true')]).</desc>
                  </valItem>
                  <valItem ident="ornamentTurnSlash">
                    <desc>Turn with slash (Tido default symbol for turn[@inv='true']).</desc>
                  </valItem>
                  <valItem ident="ornamentTrill">
                    <desc>Trill.</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompSlideTrillDAnglebert">
                    <desc>Slide trill (D'Anglebert).</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompMordentUpperPrefix">
                    <desc>Mordent with upper prefix.</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompTrillSuffixDandrieu">
                    <desc>Trill with suffix (Dandrieu).</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompTrillLowerSuffix">
                    <desc>Trill with lower suffix.</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompPortDeVoixMordent">
                    <desc>Port de voix mordent.</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompInvertedMordentUpperPrefix">
                    <desc>Inverted mordent with upper prefix.</desc>
                  </valItem>
                  <valItem ident="ornamentPrecompAppoggTrill">
                    <desc>Appogiatura trill.</desc>
                  </valItem>
                  <valItem ident="ornamentTremblement">
                    <desc>Tremblement (Tido default symbol for mordent[@long='true']).</desc>
                  </valItem>
                </valList>
              </attDef>
            </attList>
            <exemplum>
              <p>An invalid <gi>ornam</gi> element specifying the glyph in a nested <gi>symbol</gi> element</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
              rendition="#afterStaff">
                <ornam place="above" staff="1" layer="1" tstamp="1" xml:id="d115">
                  <symbol ref="#smuflOrnamentMordent" xml:id="d116"/>
                </ornam>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>ornam</gi> element specifying the glyph in the <att>glyphname</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <ornam place="above" staff="1" layer="1" tstamp="1" glyphname="ornamentMordent"
                  xml:id="d117"/>
              </egXML>
            </exemplum>
            <exemplum>
            <p>An invalid <gi>ornam</gi> element specifying a non-support glyph in the <att>glyphname</att> attribute</p>
            <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
              rendition="#afterStaff">
              <ornam place="above" staff="1" layer="1" tstamp="1" glyphname="nonSupportedGlyph"
                xml:id="d118"/>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- New attribute class for required @stem.dir -->
          <classSpec ident="att.stemdir.req" module="MEI.shared" type="atts" mode="add">
            <attList>
              <attDef ident="stem.dir" usage="req">
                <desc>Describes the direction of a stem.</desc>
                <datatype>
                  <rng:ref name="data.STEMDIRECTION"/>
                </datatype>
              </attDef>
            </attList>
          </classSpec>
          <!-- New attribute class for required @dur -->
          <classSpec ident="att.duration.musical.req" module="MEI.shared" type="atts" mode="add">
            <desc>Required attributes that express duration in musical terms.</desc>
            <attList>
              <attDef ident="dur" usage="req">
                <desc>records the duration of a feature using the relative durational values
                  provided by the data.DURATION datatype.</desc>
                <datatype>
                  <rng:ref name="data.DURATION"/>
                </datatype>
              </attDef>
            </attList>
          </classSpec>
          <!-- New attribute class for required @tstamp -->
          <classSpec ident="att.timestamp.musical.req" module="MEI.shared" type="atts" mode="add">
            <desc>Required attributes that record a time stamp in terms of musical time, i.e.,
              beats[.fractional beat part].</desc>
            <attList>
              <attDef ident="tstamp" usage="req">
                <desc>encodes the onset time in terms of musical time, i.e.,
                  beats[.fractional_beat_part].</desc>
                <datatype>
                  <rng:ref name="data.BEAT"/>
                </datatype>
              </attDef>
            </attList>
          </classSpec>
          <!-- New attribute class for mandatory @tstamp2 -->
          <classSpec ident="att.timestamp2.musical.req" module="MEI.shared" type="atts" mode="add">
            <desc>Required attributes that record a time stamp for the end of an event in terms of
              musical time.</desc>
            <attList>
              <attDef ident="tstamp2" usage="req">
                <desc>encodes the ending point of an event in terms of musical time, i.e., a count
                  of measures plus a beat location.</desc>
                <datatype>
                  <rng:ref name="data.MEASUREBEAT"/>
                </datatype>
              </attDef>
            </attList>
          </classSpec>
          <!-- === COMMON ATTRIBUTES === -->
          <classSpec ident="att.controlevent" module="MEI.shared" type="atts" mode="change">
            <constraintSpec ident="require_staff_attribute" scheme="isoschematron" mode="add">
              <desc>Require <att>staff</att> or <gi>staff</gi>.</desc>
              <constraint>
                <sch:rule context="mei:dynam|mei:fing|mei:fingGrp|mei:mordent|mei:ornam|mei:pedal|mei:tie|mei:trill|mei:turn|mei:fermata|mei:octave">
                  <sch:assert test="ancestor-or-self::*[name()='staff' or @staff]"
                    >The element or one of its ancestors must be a staff or contain a @staff attribute.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="require_layer_with_singlevalue_staff" scheme="isoschematron" mode="add">
              <desc>Require <att>layer</att> when <att>staff</att> has a single value and the element is not excluded from the rule.</desc>
              <constraint>
                <sch:rule context="mei:*[not(name() = ('slur', 'tie', 'note'))][@staff][not(contains(@staff, ' '))]">
                  <sch:assert test="exists(@layer)"
                    >@layer must be present when @staff contains a single value.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="require_place_with_singlevalue_staff" scheme="isoschematron" mode="add">
              <desc>Require <att>place</att> when <att>staff</att> has a single value and the element is not excluded from the rule.</desc>
              <constraint>
                <sch:rule context="mei:*[not(name() = ('slur', 'tie', 'note', 'octave'))][@staff][not(contains(@staff, ' '))]">
                  <sch:assert test="exists(@place)"
                    >@place must be present when @staff contains a single value.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="no_layer_with_multivalue_staff" scheme="isoschematron" mode="add">
              <desc>Prohibit <att>layer</att> when <att>staff</att> has multiple values.</desc>
              <constraint>
                <sch:rule context="mei:*[@staff]">
                  <sch:assert test="not(contains(@staff, ' ') and @layer)"
                    >@layer must be absent when @staff contains multiple values.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="no_place_with_multivalue_staff" scheme="isoschematron" mode="add">
              <desc>Prohibit <att>place</att> when <att>staff</att> has multiple values.</desc>
              <constraint>
                <sch:rule context="mei:*[@staff]">
                  <sch:assert test="not(contains(@staff, ' ') and @place)"
                    >@place must be absent when @staff contains multiple values.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
          </classSpec>
          <classSpec ident="att.spanning.req" module="MEI.shared" type="atts" mode="add">
            <desc>Describing attributes for spanning elements</desc>
            <classes>
              <memberOf key="att.timestamp.musical"/>
              <memberOf key="att.timestamp2.musical"/>
              <memberOf key="att.startendid"/>
              <memberOf key="att.staffident"/>
              <memberOf key="att.layerident"/>
            </classes>
            <constraintSpec ident="require_precisely_one_start_spec"
              scheme="isoschematron" mode="add">
              <desc>Requires that precisely one of <att>startid</att> or <att>tstamp</att> is defined</desc>
              <constraint>
                <!-- the schematron context needs to list all elements which are members of att.spanning.req -->
                <sch:rule context="mei:slur">
                  <sch:assert
                    test="(@tstamp and not(@startid)) or (not(@tstamp) and @startid)"
                    >precisely one of @tstamp or @startid must be defined</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="require_precisely_one_end_spec" scheme="isoschematron" mode="add">
              <desc>Requires that precisely one of <att>endid</att> or <att>tstamp2</att> is defined</desc>
              <constraint>
                <!-- the schematron context needs to list all elements which are members of att.spanning.req -->
                <sch:rule context="mei:slur">
                  <sch:assert
                    test="(@tstamp2 and not(@endid)) or (not(@tstamp2) and @endid)"
                    >precisely one of @tstamp2 or @endid must be defined</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
          </classSpec>
          <classSpec ident="att.spanning.musical.req" module="MEI.shared" type="atts" mode="add">
            <desc>Describing attributes for spanning elements</desc>
            <classes>
              <memberOf key="att.timestamp.musical.req"/>
              <memberOf key="att.timestamp2.musical.req"/>
              <memberOf key="att.staffident"/>
              <memberOf key="att.layerident"/>
            </classes>
          </classSpec>
          <!-- === REST ATTRIBUTES === -->
          <!-- Add required @dur class to rest attributes set -->
          <classSpec ident="att.rest.log" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.duration.musical" mode="delete"/>
              <memberOf key="att.duration.musical.req" mode="add"/>
            </classes>
            <exemplum>
              <p>A valid <gi>rest</gi> element containing the required <att>dur</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <rest dur="1" xml:id="d119"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>rest</gi> element without the required <att>dur</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <rest xml:id="d120"/>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- === SPACE ATTRIBUTES === -->
          <!-- Add required @dur class to space attributes set -->
          <classSpec ident="att.space.log" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.duration.musical" mode="delete"/>
              <memberOf key="att.duration.musical.req" mode="add"/>
            </classes>
            <exemplum>
              <p>A valid <gi>space</gi> element containing the required <att>dur</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <space dur="1" xml:id="d121"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>space</gi> element without the required <att>dur</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <space xml:id="d122"/>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- === NOTE ATTRIBUTES === -->
          <classSpec ident="att.note.log" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.accidental" mode="delete"/>
              <memberOf key="att.note.log.mensural" mode="delete"/>
            </classes>
            <constraintSpec ident="require_oct_and_pname_or_loc" scheme="isoschematron" mode="add">
              <desc>Require either <att>pname</att> and <att>oct</att> or <att>loc</att> on a
                note.</desc>
              <constraint>
                <sch:rule context="mei:note">
                  <sch:assert test="(@pname and @oct) or @loc">either @pname and @oct or @loc
                    must be specified on a note.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="standalone_note_require_dur" scheme="isoschematron" mode="add">
              <desc>Require <att>dur</att> on notes outside chords.</desc>
              <constraint>
                <sch:rule context="mei:note[not(ancestor::mei:chord)]">
                  <sch:assert test="exists(@dur)">Must have dur attribute.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="standalone_note_require_stem.dir" scheme="isoschematron" mode="add">
              <desc>Require <att>stem.dir</att> on notes outside chords.</desc>
              <constraint>
                <sch:rule context="mei:note[not(ancestor::mei:chord)]">
                  <sch:assert test="exists(@stem.dir)">Must have stem.dir attribute.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="no_note_dur_in_chord" scheme="isoschematron" mode="add">
              <desc>Forbid @dur on notes in chords.</desc>
              <constraint>
                <sch:rule context="mei:note[ancestor::mei:chord]">
                  <sch:report test="exists(@dur)">@dur attribute not permitted on notes within a chord.</sch:report>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <constraintSpec ident="no_note_stem.dir_in_chord" scheme="isoschematron" mode="add">
              <desc>Forbid @stem.dir on notes in chords.</desc>
              <constraint>
                <sch:rule context="mei:note[ancestor::mei:chord]">
                  <sch:report test="@stem.dir">@stem.dir not permitted on notes within a chord.</sch:report>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <exemplum>
              <p>A valid <gi>note</gi> element containing <att>pname</att>, <att>oct</att>, <att>dur</att> and <att>stem.dir</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <note pname="a" oct="4" dur="1" stem.dir="up" xml:id="d123"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>note</gi> element containing <att>loc</att>, <att>dur</att> and <att>stem.dir</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <note loc="4" dur="1" stem.dir="down" xml:id="d124"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid standalone <att>note</att> element without a <att>stem.dir</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note pname="a" oct="4" dur="4" xml:id="d125"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid standalone <att>note</att> element without a <att>dur</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note pname="a" dur="4" stem.dir="down" xml:id="d126"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <att>note</att> element with an <att>oct</att> but no <att>pname</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note oct="4" dur="4" stem.dir="up" xml:id="d127"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <att>note</att> element with a <att>pname</att> but no <att>oct</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note pname="a" dur="4" stem.dir="up" xml:id="d128"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <att>note</att> element missing duration, stem direction and pitch</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <note xml:id="d129"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>chord</gi> element with a <att>stem.dir</att> attribute and child notes without <att>stem.dir</att> or <att>dur</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <chord xml:id="d130" dur="4" stem.dir="up">
                  <note xml:id="d131" pname="a" oct="4"/>
                  <note xml:id="d132" pname="c" oct="4"/>
                </chord>
              </egXML>
            </exemplum>
            <exemplum>
              <p>Invalid child <gi>note</gi> elements containing <att>stem.dir</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <chord xml:id="d133" dur="4" stem.dir="up">
                  <note xml:id="d134" pname="a" oct="4" stem.dir="up"/>
                  <note xml:id="d135" pname="c" oct="4" stem.dir="up"/>
                </chord>
              </egXML>
            </exemplum>
            <exemplum>
              <p>Invalid child <gi>note</gi> elements containing <att>dur</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <chord xml:id="d136" dur="4" stem.dir="up">
                  <note xml:id="d137" pname="a" oct="4" dur="4"/>
                  <note xml:id="d138" pname="c" oct="4" dur="4"/>
                </chord>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- === CHORD ATTRIBUTES === -->
          <classSpec ident="att.chord.vis" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.stems" mode="delete"/>
              <memberOf key="att.stemdir.req" mode="add"/>
            </classes>
            <exemplum>
              <p>A valid <gi>chord</gi> element with a <att>stem.dir</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <chord dur="1" stem.dir="up" xml:id="d139">
                  <note pname="a" oct="4" xml:id="d140"/>
                  <note pname="a" oct="4" xml:id="d141"/>
                </chord>
              </egXML>
            </exemplum>
            <exemplum>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <p>An invalid <gi>chord</gi> element without the required <att>stem.dir</att> attribute</p>
                <chord dur="4" xml:id="d142">
                  <note pname="a" oct="4" xml:id="d143"/>
                  <note pname="a" oct="4" xml:id="d144"/>
                </chord>
              </egXML>
            </exemplum>
          </classSpec>
          <classSpec ident="att.chord.log" module="MEI.shared" type="atts" mode="change">
            <classes mode="change">
              <memberOf key="att.duration.musical" mode="delete"/>
              <memberOf key="att.duration.musical.req" mode="add"/>
            </classes>
            <exemplum>
              <p>A valid <gi>chord</gi> element with a <att>dur</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inLayer">
                <chord dur="1" stem.dir="up" xml:id="d145">
                  <note pname="a" oct="4" xml:id="d146"/>
                  <note pname="a" oct="4" xml:id="d147"/>
                </chord>
              </egXML>
            </exemplum>
            <exemplum>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inLayer">
                <p>An invalid <gi>chord</gi> element without the required <att>dur</att> attribute</p>
                <chord stem.dir="up" xml:id="d148">
                  <note pname="a" oct="4" xml:id="d149"/>
                  <note pname="a" oct="4" xml:id="d150"/>
                </chord>
              </egXML>
            </exemplum>
          </classSpec>
          <!-- === SLUR ATTRIBUTES === -->
          <classSpec ident="att.slur.log" module="MEI.cmn" type="atts" mode="replace">
            <desc>Logical domain attributes.</desc>
            <classes>
              <memberOf key="att.spanning.req"/>
            </classes>
          </classSpec>
          <!-- === HAIRPIN ATTRIBUTES === -->
          <classSpec ident="att.hairpin.log" module="MEI.cmn" type="atts" mode="replace">
            <desc>Logical domain attributes.</desc>
            <classes>
              <memberOf key="att.spanning.musical.req"/>
            </classes>
            <attList>
              <attDef ident="form" usage="req">
                <desc>captures the visual rendition and function of the hairpin; that is, whether it
                  indicates an increase or a decrease in volume.</desc>
                <valList type="closed">
                  <valItem ident="cres">
                    <desc>crescendo; i.e., louder.</desc>
                  </valItem>
                  <valItem ident="dim">
                    <desc>diminuendo; i.e., softer.</desc>
                  </valItem>
                </valList>
              </attDef>
            </attList>
          </classSpec>
          <!-- === ELEMENT SPECIFICATIONS === -->
          <elementSpec ident="meiHead" module="MEI.header" mode="change">
            <content>
              <rng:ref name="style"/>
              <rng:zeroOrMore>
                <rng:ref name="altId"/>
              </rng:zeroOrMore>
              <rng:ref name="fileDesc"/>
              <rng:ref name="model.headerPart_sequenceOptional"/>
              <rng:optional>
                <rng:ref name="revisionDesc"/>
              </rng:optional>
            </content>
          </elementSpec>
          <elementSpec ident="style" module="MEI.header" ns="http://tido-music.com/ns/1.0"
             mode="add">
            <desc>Contains a reference to a Tido Stylesheet (TSS).</desc>
            <classes>
              <memberOf key="att.id"/>
            </classes>
            <content>
              <rng:text/>
            </content>
            <attList>
              <attDef ident="src" usage="opt">
                <desc>Specifies the location of the associated Tido Stylesheet (TSS).</desc>
                <datatype>
                  <rng:ref name="data.URI"/>
                </datatype>
              </attDef>
            </attList>
          </elementSpec>
          <!-- === LAYER === -->
          <elementSpec ident="layer" module="MEI.shared" mode="change">
            <attList>
              <attDef ident="n" usage="req" mode="change">
                <desc>provides a name or number designation for an element. While the value need not
                  be unique, it is required to be a single token. Must be an integer.</desc>
                <datatype>
                  <rng:data type="positiveInteger"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid layer element with a positive integer <att>n</att> value</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inSection">
                <measure n="1" xml:id="d151">
                  <staff n="1" xml:id="d152">
                    <layer n="1" xml:id="d153"/>
                  </staff>
                </measure>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid layer element missing <att>n</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inSection">
                <measure n="1" xml:id="d154">
                  <staff n="1" xml:id="d155">
                    <layer xml:id="d156"/>
                  </staff>
                </measure>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid layer element with a non-integer <att>n</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inSection">
                <measure n="1" xml:id="d157">
                  <staff n="1" xml:id="d158">
                    <layer n="s1" xml:id="d159"/>
                  </staff>
                </measure>
              </egXML>
            </exemplum>
          </elementSpec>
          <!-- === SCOREDEF === -->
          <elementSpec ident="scoreDef" module="MEI.shared" mode="change">
            <content>
              <rng:choice>
                <rng:optional>
                  <rng:ref name="model.staffGrpLike"/>
                </rng:optional>
              </rng:choice>
            </content>
          </elementSpec>
          <!-- === STAFF === -->
          <elementSpec ident="staff" module="MEI.shared" mode="change">
            <attList>
              <attDef ident="n" usage="req" mode="change">
                <desc>provides a name or number designation for an element. While the value need not
                  be unique, it is required to be a single token. Must be an integer.</desc>
                <datatype>
                  <rng:data type="positiveInteger"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid staff element with a positive integer <att>n</att> value</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#inSection">
                <measure n="1" xml:id="d160">
                  <staff n="1" xml:id="d161">
                    <layer n="1" xml:id="d162"/>
                  </staff>
                </measure>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid staff element missing <att>n</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inSection">
                <measure n="1" xml:id="d163">
                  <staff xml:id="d164">
                    <layer n="1" xml:id="d165"/>
                  </staff>
                </measure>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid staff element with a non-integer <att>n</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#inSection">
                <measure n="1" xml:id="d166">
                  <staff n="s1" xml:id="d167">
                    <layer n="1" xml:id="d168"/>
                  </staff>
                </measure>
              </egXML>
            </exemplum>
          </elementSpec>
          <!-- === SLUR === -->
          <elementSpec ident="slur" module="MEI.cmn" mode="change">
            <constraintSpec ident="slur_containing_curve" scheme="isoschematron" mode="delete"/>
            <exemplum>
              <p>A valid <gi>slur</gi> with <att>tstamp</att> and <att>tstamp2</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterStaff">
                <slur tstamp="1" tstamp2="0m+2" xml:id="d169"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>slur</gi> with <att>startid</att> and <att>endid</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterStaff">
                <slur startid="#n01" endid="#n02" xml:id="d170"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>slur</gi> with <att>tstamp</att> and <att>endid</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterStaff">
                <slur tstamp="1" endid="#n02" xml:id="d171"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>slur</gi> with <att>startid</att> and <att>tstamp2</att> attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterStaff">
                <slur startid="#n01" tstamp2="0m+2" xml:id="d172"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>slur</gi> with a single value in <att>staff</att> and a <att>layer</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <slur xml:id="d173" layer="1" staff="1" tstamp="1" tstamp2="0m+2"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>slur</gi> without an attribute for the end point</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                <slur xml:id="d174" startid="#n01"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>slur</gi> without an attribute for the start point</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                <slur xml:id="d175" endid="#n02"/>
              </egXML>
            </exemplum>
            <remarks>
              <p>Historically, the term "slur" indicated two notes performed legato, while the term
                "phrase" was used for a "unified melodic idea". Nowadays, however, "slur" often has the
                same meaning as "phrase", since the visual rendition of the two
                concepts is the same. Generic MEI provides two distinct elements so that those users wishing to
                maintain a distinction for historical reasons may do so. This basic MEI customization does not maintain
                this distiction, and employs the more generic <gi scheme="MEI">slur</gi> element.
              </p>
            </remarks>
          </elementSpec>
          <!-- === HAIRPIN -->
          <elementSpec ident="hairpin" module="MEI.cmn" mode="change">
            <constraintSpec ident="hairpin_start-_and_end-type_attributes_required" scheme="isoschematron" mode="replace"/>
            <constraintSpec ident="hairpin_place_required_with_single_staff" scheme="isoschematron" mode="add">
              <desc>Require <att>place</att> on <gi>hairpin</gi> when <att>staff</att> has a single value.</desc>
              <constraint>
                <sch:rule context="mei:hairpin[not(contains(@staff, ' '))]">
                  <sch:assert test="exists(@place)">Must have place attribute.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <exemplum>
              <p>A valid <gi>hairpin</gi> with all required and optional attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" staff="1" layer="1" place="above" xml:id="d176"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>hairpin</gi> with two values in <att>staff</att> and no <att>layer</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterTwoStaves">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" staff="1 2" xml:id="d177"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> missing the <att>staff</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterTwoStaves">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" xml:id="d178"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>hairpin</gi> with a single value in <att>staff</att> and multiple values in <att>layer</att></p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#afterTwoStaves">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" staff="1" layer="1 2 3" place="below" xml:id="d179"
                />
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> with a single value in <att>staff</att> missing the <att>place</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false" rendition="#afterStaff">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" staff="1" layer="1" xml:id="d180"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> missing the <att>form</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <hairpin tstamp="1" tstamp2="0m+2" staff="1 2" xml:id="d181"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> using the <att>endid</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" staff="1 2" endid="#n02" xml:id="d182"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> using the <att>startid</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <hairpin form="cres" tstamp="1" startid="#n01" tstamp2="0m+2" staff="1 2" xml:id="d183"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> missing the <att>tstamp2</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <hairpin form="cres" tstamp="1" staff="1 2" xml:id="d184"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> missing the <att>tstamp</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <hairpin form="cres" tstamp2="0m+2" staff="1 2" xml:id="d185"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>hairpin</gi> with multiple values in <att>staff</att> and a <att>layer</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterTwoStaves">
                <hairpin form="cres" tstamp="1" tstamp2="0m+2" staff="1 2" layer="1"
                  xml:id="d186"/>
              </egXML>
            </exemplum>
            <remarks>
              <p>The <gi scheme="MEI">hairpin</gi> element is used for <emph>graphical</emph>, i.e.,
                crescendo and diminuendo, dynamic markings. For instantaneous or continuous
                <emph>textual</emph> dynamics, such as 'p', 'mf', or 'cres. poco a poco', the <gi
                  scheme="MEI">dynam</gi> element should be used. As opposed to generic MEI, in this basic
                customization the start and end point of the hairpin is always encoded with
                <att>tstamp</att>, and <att>tstamp2</att> attributes.</p>
            </remarks>
          </elementSpec>
          <!-- === STAFFDEF === -->
          <elementSpec ident="staffDef" module="MEI.shared" mode="change">
            <attList>
              <attDef ident="n" usage="req" mode="change">
                <desc>provides a name or number designation for an element. While the value need not
                  be unique, it is required to be a single token. Must be an integer.</desc>
                <datatype>
                  <rng:data type="positiveInteger"/>
                </datatype>
              </attDef>
            </attList>
            <exemplum>
              <p>A valid <gi>staffDef</gi> with an <att>n</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d187" n="1"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>staffDef</gi> missing the n attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d188"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>staffDef</gi> containing all required attributes and a <gi>clef</gi> child element</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d189" n="2">
                  <clef shape="G" line="2" xml:id="d190"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid <gi>staffDef</gi> containing all required attributes and a <gi>meterSig</gi> child element</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef lines="5" xml:id="d191" n="3">
                  <meterSig count="4" unit="4" xml:id="d192"/>
                </staffDef>
              </egXML>
            </exemplum>
          </elementSpec>
          <!-- === METER SIG === -->
          <elementSpec ident="meterSig" module="MEI.cmn" mode="change">
            <constraintSpec ident="meter_att_pair" scheme="isoschematron" mode="add">
              <desc>@count and @unit must occur together.</desc>
              <constraint>
                <sch:rule context="mei:meterSig">
                  <sch:report test="not(@count and @unit)">Time signature must be complete (both
                    @count and @unit are required).</sch:report>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <exemplum>
              <p>A valid <gi>meterSig</gi> containing all required attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" lines="5" xml:id="d193">
                  <meterSig xml:id="d194" count="4" unit="4"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>meterSig</gi> without the <att>unit</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" lines="5" xml:id="d195">
                  <meterSig xml:id="d196" count="4"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>meterSig</gi> without the <att>count</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" lines="5" xml:id="d197">
                  <meterSig xml:id="d198" unit="4"/>
                </staffDef>
              </egXML>
            </exemplum>
          </elementSpec>
          <!-- === KEY SIG === -->
          <elementSpec ident="keySig" module="MEI.shared" mode="change">
            <constraintSpec ident="key_att_pair" scheme="isoschematron" mode="add">
              <desc>@pname and @mode must occur together.</desc>
              <constraint>
                <sch:rule context="mei:keySig">
                  <sch:report test="not(@pname and @mode)"> Key signature must be complete (both
                    @pname and @mode are required).</sch:report>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <exemplum>
              <p>A valid <gi>keySig</gi> with all required attributes</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" xml:id="d199">
                  <keySig xml:id="d200" pname="f" mode="major"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>keySig</gi> with an <att>accid</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" xml:id="d201">
                  <keySig xml:id="d202" pname="f" accid="s" mode="major"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid <gi>keySig</gi> without the <att>mode</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" xml:id="d203">
                  <keySig xml:id="d204" pname="f"/>
                </staffDef>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A invalid <gi>keySig</gi> without the <att>pname</att> attribute</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#inInitialStaffGrp">
                <staffDef n="1" xml:id="d205">
                  <keySig xml:id="d206" mode="major"/>
                </staffDef>
              </egXML>
            </exemplum>
          </elementSpec>

          <elementSpec ident="dir" module="MEI.shared" mode="change">
            <constraintSpec ident="dir_type_required_closed_list" scheme="isoschematron">
              <constraint>
                <sch:rule context="mei:dir">
                  <sch:assert test="@type=('expression', 'technique')"
                    >Must have a @type of 'expression' or 'technique'</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
          </elementSpec>

          <!-- === FERMATA === -->
          <elementSpec ident="fermata" module="MEI.cmn" mode="change">
            <classes mode="change">
              <memberOf key="att.typed" mode="delete"/>
            </classes>
          </elementSpec>

          <!-- === PEDAL === -->
          <elementSpec ident="pedal" module="MEI.cmn" mode="change">
            <constraintSpec ident="pedal_style_consistent" scheme="isoschematron" mode="add">
              <constraint>
                <sch:rule context="mei:pedal[@form][@dir=('bounce', 'up')]">
                  <sch:let name="form" value="@form"/>
                  <sch:assert test="preceding::mei:pedal[1][@form=$form]">
                    Pedal styles must be consistent between pedal down and pedal up.</sch:assert>
                </sch:rule>
              </constraint>
            </constraintSpec>
            <exemplum>
              <p>A valid sequence of <gi>pedal</gi> elements</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" tstamp="1" form="line" staff="1" xml:id="d207"/>
                <pedal place="below" layer="1" dir="bounce" tstamp="1" form="line" staff="1" xml:id="d208"/>
                <pedal place="below" layer="1" dir="up" tstamp="2" form="line" staff="1" xml:id="d209"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid sequence of <gi>pedal</gi> elements</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" tstamp="1" form="line" staff="1" xml:id="d210"/>
                <pedal place="below" layer="1" dir="bounce" tstamp="1" form="line" staff="1" xml:id="d211"/>
                <pedal place="below" layer="1" dir="up" tstamp="2" form="pedstar" staff="1" xml:id="d212"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>An invalid sequence of <gi>pedal</gi> elements</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="false"
                rendition="#afterStaff">
                <pedal place="below" layer="1" dir="down" tstamp="1" form="line" staff="1" xml:id="d213"/>
                <pedal place="below" layer="1" dir="bounce" tstamp="1" form="altpedstar" staff="1" xml:id="d214"/>
                <pedal place="below" layer="1" dir="up" tstamp="2" form="line" staff="1" xml:id="d215"/>
              </egXML>
            </exemplum>
            <exemplum>
              <p>A valid sequence of <gi>pedal</gi> elements</p>
              <egXML xmlns="http://www.tei-c.org/ns/Examples" valid="true" rendition="#afterStaff">
                <pedal place="below" layer="1" dir="half" tstamp="1" form="altpedstar" staff="1" xml:id="d216"/>
                <pedal place="below" layer="1" dir="up" tstamp="2" form="altpedstar" staff="1" xml:id="d217"/>
              </egXML>
            </exemplum>
          </elementSpec>
          <!-- === NUMBER PLACEMENT === -->
          <classSpec ident="att.numberplacement" module="MEI.cmn" type="atts" mode="change">
            <attList>
              <attDef ident="num.loc" usage="opt" mode="add" ns="http://tido-music.com/ns/1.0">
                <desc>holds the staff location of the number.</desc>
                <datatype>
                  <rng:ref name="data.STAFFLOC"/>
                </datatype>
              </attDef>
            </attList>
          </classSpec>
          <!-- DATA TYPES -->
          <macroSpec ident="data.ACCIDENTAL.EXPLICIT" module="MEI" type="dt" mode="replace">
            <desc>Accidental attribute values.</desc>
            <content>
              <valList type="closed">
                <valItem ident="s">
                  <desc>Sharp.</desc>
                </valItem>
                <valItem ident="f">
                  <desc>Flat.</desc>
                </valItem>
                <valItem ident="x">
                  <desc>Double sharp (written using croix).</desc>
                </valItem>
                <valItem ident="ff">
                  <desc>Double flat.</desc>
                </valItem>
                <valItem ident="n">
                  <desc>Natural.</desc>
                </valItem>
              </valList>
            </content>
            <remarks>
              <p>
                <graphic
                  url="https://music-encoding.googlecode.com/svn/trunk/source/guidelines/Images/ExampleImages/accid-20100510.png"
                  height="50%" width="50%"/>
              </p>
            </remarks>
          </macroSpec>
          <macroSpec ident="data.ACCIDENTAL.IMPLICIT" module="MEI" type="dt" mode="replace">
            <desc>Accidental attribute values.</desc>
            <valList type="closed">
              <valItem ident="s">
                <desc>Sharp.</desc>
              </valItem>
              <valItem ident="f">
                <desc>Flat.</desc>
              </valItem>
              <valItem ident="ss">
                <desc>Double sharp.</desc>
              </valItem>
              <valItem ident="ff">
                <desc>Double flat.</desc>
              </valItem>
              <valItem ident="n">
                <desc>Natural.</desc>
              </valItem>
            </valList>
          </macroSpec>
          <macroSpec ident="data.ARTICULATION" module="MEI" type="dt" mode="replace">
            <desc>The following list of articulations mostly corresponds to symbols from the Western
              Musical Symbols portion of the Unicode Standard. The dot and stroke values may be used
              in cases where interpretation is difficult or undesirable.</desc>
            <content>
              <valList type="closed">
                <valItem ident="acc">
                  <desc>Accent (Unicode 1D17B).</desc>
                </valItem>
                <valItem ident="stacc">
                  <desc>Staccato (Unicode 1D17C).</desc>
                </valItem>
                <valItem ident="ten">
                  <desc>Tenuto (Unicode 1D17D).</desc>
                </valItem>
                <valItem ident="stacciss">
                  <desc>Staccatissimo (Unicode 1D17E).</desc>
                </valItem>
                <valItem ident="marc">
                  <desc>Marcato (Unicode 1D17F).</desc>
                </valItem>
              </valList>
            </content>
          </macroSpec>
        </schemaSpec>
      </div>
    </back>
  </text>
</TEI>
